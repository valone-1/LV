"use strict";var uid=JSON.parse(localStorage.getItem("id")),username=JSON.parse(localStorage.getItem("username"));if(uid){var loadCartsAPI="http://jx.xuzhixiang.top/ap/api/cart-list.php";$.get(loadCartsAPI,{id:uid}).then(function(n){console.log(n.data);var i=n.data;$("#number").html(i.length);var a="";$(i).each(function(n,t){a+='\n                    <div class="cartsitem">\n                    <div class="details">\n                        <div class="itemimg"><img src="'.concat(i[n].pimg,'" alt=""></div>\n                        <div class="itemdesc">\n                            <h2>').concat(i[n].pname,"</h2>\n                            <p>产品型号：<span>").concat(i[n].pid,'</span></p>\n                            <h3>产品颜色：默认</h3>\n                            <button class="del" data-id="').concat(i[n].pid,'"><img src="../images/del.jpg" alt=""></button>\n                        </div>\n                    </div>\n                    <div class="prices">\n                        <div class="itemqunatity">\n                            <div class="pick" data-id="').concat(i[n].pid,'">\n                                <div class="goodsnum">').concat(i[n].pnum,'</div>\n                                <select name="" id="">\n                                \n                                    <option value="1">1</option>\n                                    <option value="2">2</option>\n                                    \n                                </select>\n                            </div>\n                            \n                        </div>\n                        <div class="itemprice">￥').concat(i[n].pprice,"</div>\n                    </div>\n                </div>\n                ")}),$(".cartslist").html(a),$(".pick").each(function(n,t){$(".pick").eq(n).click(function(){$(this).find(".goodsnum").html($(this).find("select").val());var n=$(this).find(".goodsnum").html(),t=this.getAttribute("data-id");$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:uid,pid:t,pnum:n}).then(function(n){console.log(n.msg)}),money(i)})}),$(".del").click(function(){var n=this.getAttribute("data-id");$(".confirm").css({display:"block"}),$(".yes").click(function(){var t=this;$.get("http://jx.xuzhixiang.top/ap/api/cart-delete.php",{pid:n,uid:uid}).then(function(n){console.log(n),t.parentNode.parentNode.parentNode.remove(),location.reload()})}),$(".no").click(function(){$(".confirm").css({display:"none"})})}),money(i)})}else alert("请登录"),location.href="login.html";function money(n){for(var t=0,i=0;i<n.length;i++)t+=n[i].pnum*n[i].pprice;$(".totalmoney").html("￥"+t)}$(".gouwuche").click(function(){if(username){console.log(1),$(".carts").css({display:"block"});$.get("http://jx.xuzhixiang.top/ap/api/cart-list.php",{id:uid}).then(function(n){var i=n.data;console.log(i.length);var a="";$(i).each(function(n,t){a+='\n                    <li>\n                        <a href="goods-content.html?pid='.concat(i[n].pid,'">\n                        \n                            <img src="').concat(i[n].pimg,'" alt="">\n                            <span class="goodsname">').concat(i[n].pname,'</span>\n                            <span class="goodspprice">￥').concat(i[n].pprice,"</span>\n                        \n                        </a>\n                    </li>\n                ")}),$(".cart-ul").html(a);var o=0;$(".goodspprice").each(function(n,t){o+=parseInt($(".goodspprice").eq(n).html())}),$(".money").html($(".money").html()+o)})}else console.log("没有登录"),confirm("请登录以查看购物车")&&(location.href="login.html")}),$(".login-lv").click(function(){uid?($("#personal li").eq(0).html("用户"+username),$("#personal").toggle(),$("#loginout").click(function(){1==confirm("您确定要退出吗")&&(localStorage.removeItem("id"),localStorage.removeItem("username"),localStorage.removeItem("token"),this.href="login.html")})):(alert("请登录"),location.href="login.html")});